(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{215:function(t,e,n){t.exports=n.p+"assets/img/New-Asp-Net-Core-Project.39abc9c0.png"},216:function(t,e,n){t.exports=n.p+"assets/img/Add-Npm-Config.d866ce30.png"},217:function(t,e,n){t.exports=n.p+"assets/img/Typescript-Config.e31eb73a.png"},385:function(t,e,n){"use strict";n.r(e);var a=n(0),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"electron-net-入門"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#electron-net-入門","aria-hidden":"true"}},[t._v("#")]),t._v(" Electron.NET 入門")]),t._v(" "),a("p",[a("img",{attrs:{src:n(215),alt:""}})]),t._v(" "),a("p",[t._v("建立好 ASP.NET Core 2.0 Project, 並且安裝")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> Install-Package ElectronNET.API\n")])])]),a("p",[t._v("用記事本打開xxx.csproj 專案, 在 &ltProject&gt 底下新增下面片段")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<ItemGroup>\n\t<DotNetCliToolReference Include="ElectronNET.CLI" Version="0.0.6" />\n</ItemGroup>\n')])])]),a("p",[t._v("修改Program.cs 原始碼,")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public static IWebHost BuildWebHost(string[] args)\n{\n\treturn WebHost.CreateDefaultBuilder(args)\n\t\t.UseElectron(args)\n\t\t.UseStartup&lt;Startup>()\n\t\t.Build();\n}\n")])])]),a("p",[t._v("修改Startup.cs 原始碼")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("public void Configure(IApplicationBuilder app, IHostingEnvironment env) {\n\t...\n\tapp.UseMvc(routes =>\n\t{\n\t\t...\n\t});\n\n\t<b>\n\t// Open the Electron-Window here\n\tTask.Run(async () => await Electron.WindowManager.CreateWindowAsync());\n\t</b>\n}\n")])])]),a("p",[t._v("在專案web 開啟command prompt 執行下面指令初始化")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> dotnet electronize init\n")])])]),a("p",[t._v("他會自動新增electron.manifest.json 檔案到專案根目錄")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n\t"executable": "ElectronNET-Starter"\n}\n')])])]),a("p",[t._v("接著開始執行")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> dotnet electronize start\n")])])]),a("p",[t._v("當你clean bin, 你可以用指令回復")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> dotnet restore\n")])])]),a("p",[t._v("假如你要建立執行檔案, 以下四種指令都可以執行")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("> dotnet electronize build\n> dotnet electronize build win\n> dotnet electronize build osx\n> dotnet electronize build linux\n")])])]),a("blockquote",[a("p",[t._v("Important! A Mac or Linux device is required to build Mac applications.")])]),t._v(" "),a("p",[t._v("假如你遇到下面問題")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("NU1604: Project dependency ElectronNET.CLI does not contain an inclusive lower bound. Include a lower bound in the dependency version to ensure consistent restore results.\n")])])]),a("p",[t._v("Try changing:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<ItemGroup>\n\t<DotNetCliToolReference Include="ElectronNET.CLI" Version="*" />\n</ItemGroup>\n')])])]),a("p",[t._v("to this:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('<ItemGroup>\n\t<DotNetCliToolReference Include="ElectronNET.CLI" Version="0.0.6"/>\n</ItemGroup>\n')])])]),a("p",[t._v("接下來在專案按滑鼠右鍵(Add->New Item), 新增npm Configuration File.")]),t._v(" "),a("p",[a("img",{attrs:{src:n(216),alt:""}})]),t._v(" "),a("p",[t._v("將下面內容貼到 "),a("em",[t._v("package.json")]),t._v(" 檔案中")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n\t"version": "1.0.0",\n\t"name": "asp.net",\n\t"private": true,\n\t"devDependencies": {\n\t\t"@types/node": "^9.4.0",\n\t\t"@types/pixi.js": "^4.7.0",\n\t\t"@types/vue": "^2.0.0",\n\t\t"bootstrap": "^4.0.0",\n\t\t"bootstrap-vue": "^2.0.0-rc.1",\n\t\t"cli": "^1.0.1",\n\t\t"css-loader": "^0.28.9",\n\t\t"electron-packager": "^10.1.2",\n\t\t"grunt": "^1.0.1",\n\t\t"grunt-electron-installer": "^2.1.0",\n\t\t"jquery": "^3.3.1",\n\t\t"node-sass": "^4.7.2",\n\t\t"path": "^0.12.7",\n\t\t"pixi.js": "^4.7.0",\n\t\t"sass-loader": "^6.0.6",\n\t\t"style-loader": "^0.20.1",\n\t\t"ts-loader": "^3.4.0",\n\t\t"tsconfig-paths-webpack-plugin": "^2.0.0",\n\t\t"typescript": "^2.7.1",\n\t\t"typings": "^2.1.1",\n\t\t"vue": "^2.5.13",\n\t\t"vue-class-component": "^6.1.2",\n\t\t"vue-loader": "^14.0.3",\n\t\t"vue-property-decorator": "^6.0.0",\n\t\t"vue-router": "^3.0.1",\n\t\t"vue-template-compiler": "^2.5.13",\n\t\t"webpack": "^3.10.0",\n\t\t"webpack-merge": "^4.1.1"\n\t}\n}\n')])])]),a("p",[t._v("為了避免額外的複雜性, 在ASP.NET Core專案根目錄底下, 新增tsconfig.json")]),t._v(" "),a("p",[a("img",{attrs:{src:n(217),alt:""}})]),t._v(" "),a("p",[t._v("並且貼上下面全部的內容")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('{\n\t"compilerOptions": {\n\t\t"allowSyntheticDefaultImports": true,\n\t\t"emitDecoratorMetadata": true,\n\t\t"experimentalDecorators": true,\n\t\t"module": "es2015",\n\t\t"moduleResolution": "node",\n\t\t"target": "es2015",\n\t\t"lib": [\n\t\t\t"es2015",\n\t\t\t"es2015.promise",\n\t\t\t"dom"\n\t\t],\n\t\t"removeComments": true,\n\t\t"sourceMap": true,\n\t\t"skipDefaultLibCheck": true,\n\t\t"types": [ "node", "requirejs" ]\n\t},\n\t"compileOnSave": true,\n\t"exclude": [\n\t\t"bin",\n\t\t"node_modules"\n\t]\n}\n')])])]),a("p",[t._v("在專案根目錄下新增webpack.config.js 檔案")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const merge = require('webpack-merge');\nconst baseConfig = require('../../Shared/webpack.baseConfig');\nconst path = require('path');\n\nmodule.exports = function (env) {\n\tenv.rootDir = __dirname;\n\tconst isProduction = env.dev === true;\n\n\tlet devConfig = merge(baseConfig(env), {\n\t\tentry: {\n\t\t\tapp: path.join(__dirname, 'src/app.ts')\n\t\t},\n\t\ttarget: 'electron-renderer',\n\t\tdevtool: isProduction ? 'source-map' : 'inline-source-map',\n\t\tdevServer: {\n\t\t\tcontentBase: path.join(__dirname, 'public'),\n\t\t\thistoryApiFallback: true,\n\t\t\tpublicPath: '/dist/'\n\t\t}\n\t});\n\treturn devConfig;\n};\n")])])]),a("p",[t._v("下載 "),a("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=MadsKristensen.WebPackTaskRunner",target:"_blank",rel:"noopener noreferrer"}},[t._v("WebPack Task Runner"),a("OutboundLink")],1),t._v(" 並且安裝")]),t._v(" "),a("p",[t._v("在VS.NET IDE 點取 View -> Other Windows -> Task Runner Explorer, 打開")]),t._v(" "),a("p",[t._v("建立vue-module.d.ts 檔案, 以便使用 .vue 檔案")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("declare module \"*.vue\" {\n\timport Vue from 'vue';\n\texport default typeof Vue;\n}\n")])])]),a("p",[t._v("假如使用Typescript 2.6 (包含)以上, 會出現下面編譯錯誤")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Error\tTS2714 (TS) The expression of an export assignment must be an identifier or qualified name in an ambient context.\n")])])]),a("p",[t._v("目前只能用下面方式忽略")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("declare module \"*.vue\" {\n\timport Vue from 'vue';\n\t<b>// @ts-ignore</b>\n\texport default typeof Vue;\n}\n")])])])])}),[],!1,null,null,null);e.default=s.exports}}]);