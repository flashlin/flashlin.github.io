<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Electron.NET 入門 | Flash&#39;s BLOG</title>
    <meta name="description" content="對於我這種只有一點點知識又沒錢的傢伙只好自行徒手建立這BLOG">
    
    
    <link rel="preload" href="/flashlin.github.io/assets/css/0.styles.7db30d77.css" as="style"><link rel="preload" href="/flashlin.github.io/assets/js/app.da66474b.js" as="script"><link rel="preload" href="/flashlin.github.io/assets/js/2.e069464e.js" as="script"><link rel="preload" href="/flashlin.github.io/assets/js/8.13d14fd3.js" as="script"><link rel="prefetch" href="/flashlin.github.io/assets/js/10.9a7c27f0.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/11.480b91f8.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/12.c458e2de.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/13.f9af908d.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/14.6d8a1fda.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/15.a4e2fae6.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/16.3b770901.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/17.cb151927.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/18.8f187928.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/19.1dc257ea.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/20.b7cea1af.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/21.f4d9e965.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/22.9e4de495.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/23.134f725f.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/24.8c9d4813.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/25.dda1c420.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/26.37a6d93d.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/27.54ccb567.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/28.79c304de.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/29.0560ae7c.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/3.8cdc345e.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/30.a9bc42f9.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/31.a25ea615.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/32.6fe91646.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/33.1f1c4e06.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/34.c7d21ef6.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/35.c680bc5b.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/36.1a460c8d.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/37.a3393bad.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/4.7a7c6fe6.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/5.46d4d14b.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/6.c27d5c37.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/7.13dc4ff4.js"><link rel="prefetch" href="/flashlin.github.io/assets/js/9.972f8361.js">
    <link rel="stylesheet" href="/flashlin.github.io/assets/css/0.styles.7db30d77.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/flashlin.github.io/" class="home-link router-link-active"><!----> <span class="site-name">Flash's BLOG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/flashlin.github.io/" class="nav-link">Home</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/flashlin.github.io/" class="nav-link">Home</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Home</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/flashlin.github.io/" class="sidebar-link">ReadMe</a></li><li><a href="/flashlin.github.io/AspNetCore.html" class="sidebar-link">DotNet Core</a></li><li><a href="/flashlin.github.io/Build Failover Cluster.html" class="sidebar-link">Building a Two-Node Failover Cluster</a></li><li><a href="/flashlin.github.io/Docker.html" class="sidebar-link">Docker</a></li><li><a href="/flashlin.github.io/Docker-Linux.html" class="sidebar-link">Install Docker on Linux Mint 18</a></li><li><a href="/flashlin.github.io/DotNet-HttpModule.html" class="sidebar-link">DotNet HttpModule</a></li><li><a href="/flashlin.github.io/ElectronNET.html" class="active sidebar-link">Electron.NET 入門</a></li><li><a href="/flashlin.github.io/ExtraVue.html" class="sidebar-link">用ExtraVuex 寫TicTacToe 井字遊戲</a></li><li><a href="/flashlin.github.io/Git.html" class="sidebar-link">Git</a></li><li><a href="/flashlin.github.io/GoogleAnalyticsReport.html" class="sidebar-link">C# Google Analytics Report API</a></li><li><a href="/flashlin.github.io/Keras.html" class="sidebar-link">Keras</a></li><li><a href="/flashlin.github.io/Nginx-Rtmp-Server.html" class="sidebar-link">Nginx Rtmp Server</a></li><li><a href="/flashlin.github.io/OWASP TOP 10.html" class="sidebar-link">OWASP TOP 10</a></li><li><a href="/flashlin.github.io/Robocopy.html" class="sidebar-link">Robocopy 指令範例參考</a></li><li><a href="/flashlin.github.io/SQL-Joins.html" class="sidebar-link">SQL Joins Syntax</a></li><li><a href="/flashlin.github.io/Secutiry Misconfiguration.html" class="sidebar-link">OWASP-2013-A5 Security Misconfiguration (安全配置錯誤)</a></li><li><a href="/flashlin.github.io/SignalR.html" class="sidebar-link">SignalR</a></li><li><a href="/flashlin.github.io/TimescaleDB.html" class="sidebar-link">TimescaleDB</a></li><li><a href="/flashlin.github.io/VuePress-Tutorial.html" class="sidebar-link">VuePress + Github 取代 Gitbook or Blog</a></li><li><a href="/flashlin.github.io/Webpack.html" class="sidebar-link">WebPack</a></li><li><a href="/flashlin.github.io/Yarn.html" class="sidebar-link">Yarn</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DotNet-Core</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Typescripts</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>設計守則</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>錯誤集錦</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="electron-net-入門"><a href="#electron-net-入門" aria-hidden="true" class="header-anchor">#</a> Electron.NET 入門</h1> <p><img src="/flashlin.github.io/assets/img/New-Asp-Net-Core-Project.39abc9c0.png" alt=""></p> <p>建立好 ASP.NET Core 2.0 Project, 並且安裝</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; Install-Package ElectronNET.API
</code></pre></div><p>用記事本打開xxx.csproj 專案, 在 &amp;ltProject&amp;gt 底下新增下面片段</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ItemGroup&gt;
	&lt;DotNetCliToolReference Include=&quot;ElectronNET.CLI&quot; Version=&quot;0.0.6&quot; /&gt;
&lt;/ItemGroup&gt;
</code></pre></div><p>修改Program.cs 原始碼,</p> <div class="language- extra-class"><pre class="language-text"><code>public static IWebHost BuildWebHost(string[] args)
{
	return WebHost.CreateDefaultBuilder(args)
		.UseElectron(args)
		.UseStartup&amp;lt;Startup&gt;()
		.Build();
}
</code></pre></div><p>修改Startup.cs 原始碼</p> <div class="language- extra-class"><pre class="language-text"><code>public void Configure(IApplicationBuilder app, IHostingEnvironment env) {
	...
	app.UseMvc(routes =&gt;
	{
		...
	});

	&lt;b&gt;
	// Open the Electron-Window here
	Task.Run(async () =&gt; await Electron.WindowManager.CreateWindowAsync());
	&lt;/b&gt;
}
</code></pre></div><p>在專案web 開啟command prompt 執行下面指令初始化</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; dotnet electronize init
</code></pre></div><p>他會自動新增electron.manifest.json 檔案到專案根目錄</p> <div class="language- extra-class"><pre class="language-text"><code>{
	&quot;executable&quot;: &quot;ElectronNET-Starter&quot;
}
</code></pre></div><p>接著開始執行</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; dotnet electronize start
</code></pre></div><p>當你clean bin, 你可以用指令回復</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; dotnet restore
</code></pre></div><p>假如你要建立執行檔案, 以下四種指令都可以執行</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; dotnet electronize build
&gt; dotnet electronize build win
&gt; dotnet electronize build osx
&gt; dotnet electronize build linux
</code></pre></div><blockquote><p>Important! A Mac or Linux device is required to build Mac applications.</p></blockquote> <p>假如你遇到下面問題</p> <div class="language- extra-class"><pre class="language-text"><code>NU1604: Project dependency ElectronNET.CLI does not contain an inclusive lower bound. Include a lower bound in the dependency version to ensure consistent restore results.
</code></pre></div><p>Try changing:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ItemGroup&gt;
	&lt;DotNetCliToolReference Include=&quot;ElectronNET.CLI&quot; Version=&quot;*&quot; /&gt;
&lt;/ItemGroup&gt;
</code></pre></div><p>to this:</p> <div class="language- extra-class"><pre class="language-text"><code>&lt;ItemGroup&gt;
	&lt;DotNetCliToolReference Include=&quot;ElectronNET.CLI&quot; Version=&quot;0.0.6&quot;/&gt;
&lt;/ItemGroup&gt;
</code></pre></div><p>接下來在專案按滑鼠右鍵(Add-&gt;New Item), 新增npm Configuration File.</p> <p><img src="/flashlin.github.io/assets/img/Add-Npm-Config.d866ce30.png" alt=""></p> <p>將下面內容貼到 <em>package.json</em> 檔案中</p> <div class="language- extra-class"><pre class="language-text"><code>{
	&quot;version&quot;: &quot;1.0.0&quot;,
	&quot;name&quot;: &quot;asp.net&quot;,
	&quot;private&quot;: true,
	&quot;devDependencies&quot;: {
		&quot;@types/node&quot;: &quot;^9.4.0&quot;,
		&quot;@types/pixi.js&quot;: &quot;^4.7.0&quot;,
		&quot;@types/vue&quot;: &quot;^2.0.0&quot;,
		&quot;bootstrap&quot;: &quot;^4.0.0&quot;,
		&quot;bootstrap-vue&quot;: &quot;^2.0.0-rc.1&quot;,
		&quot;cli&quot;: &quot;^1.0.1&quot;,
		&quot;css-loader&quot;: &quot;^0.28.9&quot;,
		&quot;electron-packager&quot;: &quot;^10.1.2&quot;,
		&quot;grunt&quot;: &quot;^1.0.1&quot;,
		&quot;grunt-electron-installer&quot;: &quot;^2.1.0&quot;,
		&quot;jquery&quot;: &quot;^3.3.1&quot;,
		&quot;node-sass&quot;: &quot;^4.7.2&quot;,
		&quot;path&quot;: &quot;^0.12.7&quot;,
		&quot;pixi.js&quot;: &quot;^4.7.0&quot;,
		&quot;sass-loader&quot;: &quot;^6.0.6&quot;,
		&quot;style-loader&quot;: &quot;^0.20.1&quot;,
		&quot;ts-loader&quot;: &quot;^3.4.0&quot;,
		&quot;tsconfig-paths-webpack-plugin&quot;: &quot;^2.0.0&quot;,
		&quot;typescript&quot;: &quot;^2.7.1&quot;,
		&quot;typings&quot;: &quot;^2.1.1&quot;,
		&quot;vue&quot;: &quot;^2.5.13&quot;,
		&quot;vue-class-component&quot;: &quot;^6.1.2&quot;,
		&quot;vue-loader&quot;: &quot;^14.0.3&quot;,
		&quot;vue-property-decorator&quot;: &quot;^6.0.0&quot;,
		&quot;vue-router&quot;: &quot;^3.0.1&quot;,
		&quot;vue-template-compiler&quot;: &quot;^2.5.13&quot;,
		&quot;webpack&quot;: &quot;^3.10.0&quot;,
		&quot;webpack-merge&quot;: &quot;^4.1.1&quot;
	}
}
</code></pre></div><p>為了避免額外的複雜性, 在ASP.NET Core專案根目錄底下, 新增tsconfig.json</p> <p><img src="/flashlin.github.io/assets/img/Typescript-Config.e31eb73a.png" alt=""></p> <p>並且貼上下面全部的內容</p> <div class="language- extra-class"><pre class="language-text"><code>{
	&quot;compilerOptions&quot;: {
		&quot;allowSyntheticDefaultImports&quot;: true,
		&quot;emitDecoratorMetadata&quot;: true,
		&quot;experimentalDecorators&quot;: true,
		&quot;module&quot;: &quot;es2015&quot;,
		&quot;moduleResolution&quot;: &quot;node&quot;,
		&quot;target&quot;: &quot;es2015&quot;,
		&quot;lib&quot;: [
			&quot;es2015&quot;,
			&quot;es2015.promise&quot;,
			&quot;dom&quot;
		],
		&quot;removeComments&quot;: true,
		&quot;sourceMap&quot;: true,
		&quot;skipDefaultLibCheck&quot;: true,
		&quot;types&quot;: [ &quot;node&quot;, &quot;requirejs&quot; ]
	},
	&quot;compileOnSave&quot;: true,
	&quot;exclude&quot;: [
		&quot;bin&quot;,
		&quot;node_modules&quot;
	]
}
</code></pre></div><p>在專案根目錄下新增webpack.config.js 檔案</p> <div class="language- extra-class"><pre class="language-text"><code>const merge = require('webpack-merge');
const baseConfig = require('../../Shared/webpack.baseConfig');
const path = require('path');

module.exports = function (env) {
	env.rootDir = __dirname;
	const isProduction = env.dev === true;

	let devConfig = merge(baseConfig(env), {
		entry: {
			app: path.join(__dirname, 'src/app.ts')
		},
		target: 'electron-renderer',
		devtool: isProduction ? 'source-map' : 'inline-source-map',
		devServer: {
			contentBase: path.join(__dirname, 'public'),
			historyApiFallback: true,
			publicPath: '/dist/'
		}
	});
	return devConfig;
};
</code></pre></div><p>下載 <a href="https://marketplace.visualstudio.com/items?itemName=MadsKristensen.WebPackTaskRunner" target="_blank" rel="noopener noreferrer">WebPack Task Runner<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 並且安裝</p> <p>在VS.NET IDE 點取 View -&gt; Other Windows -&gt; Task Runner Explorer, 打開</p> <p>建立vue-module.d.ts 檔案, 以便使用 .vue 檔案</p> <div class="language- extra-class"><pre class="language-text"><code>declare module &quot;*.vue&quot; {
	import Vue from 'vue';
	export default typeof Vue;
}
</code></pre></div><p>假如使用Typescript 2.6 (包含)以上, 會出現下面編譯錯誤</p> <div class="language- extra-class"><pre class="language-text"><code>Error	TS2714 (TS) The expression of an export assignment must be an identifier or qualified name in an ambient context.
</code></pre></div><p>目前只能用下面方式忽略</p> <div class="language- extra-class"><pre class="language-text"><code>declare module &quot;*.vue&quot; {
	import Vue from 'vue';
	&lt;b&gt;// @ts-ignore&lt;/b&gt;
	export default typeof Vue;
}
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/flashlin.github.io/DotNet-HttpModule.html" class="prev">DotNet HttpModule</a></span> <span class="next"><a href="/flashlin.github.io/ExtraVue.html">用ExtraVuex 寫TicTacToe 井字遊戲</a>→
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/flashlin.github.io/assets/js/app.da66474b.js" defer></script><script src="/flashlin.github.io/assets/js/2.e069464e.js" defer></script><script src="/flashlin.github.io/assets/js/8.13d14fd3.js" defer></script>
  </body>
</html>
